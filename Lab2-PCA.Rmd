---
title: "Analysis of High Dimensional Data - Lab 2"
author: "Adapted by Milan Malfait"
date: "20 Oct 2020"
---

```{r setup, include=FALSE, cache=FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

***

# Introduction

The first part of this lab demonstrates the influence of standardizing the data (i.e. working on the correlation matrix vs. working on the covariance matrix). Pay attention to what the output looks like and how it links to the biplot.)

We will load the `trees` dataset (from base `R`, see `?trees` for more info) that contains  the height of a tree (in *feet*), the girth (or diameter in *inches*) and the volume (in *cubic feet*) of the tree. 
For the purpose of this exercise, we will convert the continuous *volume* variable to a categorical variable (a `factor` in R lingo).
A tree will be considered large if its volume is bigger than 20 cubic feet, and small otherwise. 

```{r}
# Load data
data(trees)

# Convert volume to factor
trees$vol_fac <- as.factor(ifelse(trees$Volume > 20, "large", "small"))

# Preview data
head(trees)
summary(trees)
```

Now suppose that the height was actually measured in __miles__ instead of feet.

```{r}
tree_height_miles <- trees$Height / 5280
tree_girth <- trees$Girth

# Create matrix using Height and Girth variables
tree_mx <- cbind(tree_height_miles, tree_girth)
head(tree_mx)
```

We run PCA on the *height (in miles)* and *girth* variables and inspect the results.

```{r}
# Run PCA with prcomp function, which uses SVD internally (see ?prcomp)
# Note that prcomp centers the matrix internally by default but does not scale it
# (center = TRUE, scale. = FALSE)
tree_pca <- prcomp(tree_mx)
summary(tree_pca)
```

__Note:__ The first component explains almost 100% of the variability in the data.

The __loadings__ of the PCA are stored in the `$rotation` slot of the `prcomp` result, while the `$sdev` slot contains the standard deviations of the principal components.

```{r}
tree_pca$rotation
tree_pca$sdev
```

# Session info {-}

<details><summary>Session info</summary>

```{r session_info, echo=FALSE, cache=FALSE}
Sys.time()
sessioninfo::session_info()
```

</details>

# [Home](https://statomics.github.io/HDA2020/) {-}
